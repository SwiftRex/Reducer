{"primaryContentSections":[{"kind":"declarations","declarations":[{"tokens":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"liftToCollection"},{"kind":"text","text":"<"},{"kind":"genericParameter","text":"GlobalAction"},{"kind":"text","text":", "},{"kind":"genericParameter","text":"GlobalState"},{"kind":"text","text":", "},{"kind":"genericParameter","text":"CollectionState"},{"kind":"text","text":">("},{"kind":"externalParam","text":"action"},{"kind":"text","text":" "},{"kind":"internalParam","text":"actionMap"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"KeyPath","preciseIdentifier":"s:s7KeyPathC"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"GlobalAction","preciseIdentifier":"s:7ReducerAAV16liftToCollection6action05stateD0AByqd__qd_0_Gs7KeyPathCyqd__5IndexQyd_1_5index_xADtSgG_s08WritablegH0Cyqd_0_qd_1_Gt7ElementQyd_1_Rs_SMRd_1_r1_lF12GlobalActionL_qd__mfp"},{"kind":"text","text":", (index"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"CollectionState","preciseIdentifier":"s:7ReducerAAV16liftToCollection6action05stateD0AByqd__qd_0_Gs7KeyPathCyqd__5IndexQyd_1_5index_xADtSgG_s08WritablegH0Cyqd_0_qd_1_Gt7ElementQyd_1_Rs_SMRd_1_r1_lF0D5StateL_qd_1_mfp"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Index","preciseIdentifier":"s:Sl5IndexQa"},{"kind":"text","text":", action"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"ActionType","preciseIdentifier":"s:7ReducerAAV10ActionTypexmfp"},{"kind":"text","text":")?>, "},{"kind":"externalParam","text":"stateCollection"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"WritableKeyPath","preciseIdentifier":"s:s15WritableKeyPathC"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"GlobalState","preciseIdentifier":"s:7ReducerAAV16liftToCollection6action05stateD0AByqd__qd_0_Gs7KeyPathCyqd__5IndexQyd_1_5index_xADtSgG_s08WritablegH0Cyqd_0_qd_1_Gt7ElementQyd_1_Rs_SMRd_1_r1_lF11GlobalStateL_qd_0_mfp"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"CollectionState","preciseIdentifier":"s:7ReducerAAV16liftToCollection6action05stateD0AByqd__qd_0_Gs7KeyPathCyqd__5IndexQyd_1_5index_xADtSgG_s08WritablegH0Cyqd_0_qd_1_Gt7ElementQyd_1_Rs_SMRd_1_r1_lF0D5StateL_qd_1_mfp"},{"kind":"text","text":">) -> "},{"kind":"typeIdentifier","identifier":"doc:\/\/Reducer\/documentation\/Reducer\/Reducer","preciseIdentifier":"s:7ReducerAAV","text":"Reducer"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"GlobalAction","preciseIdentifier":"s:7ReducerAAV16liftToCollection6action05stateD0AByqd__qd_0_Gs7KeyPathCyqd__5IndexQyd_1_5index_xADtSgG_s08WritablegH0Cyqd_0_qd_1_Gt7ElementQyd_1_Rs_SMRd_1_r1_lF12GlobalActionL_qd__mfp"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"GlobalState","preciseIdentifier":"s:7ReducerAAV16liftToCollection6action05stateD0AByqd__qd_0_Gs7KeyPathCyqd__5IndexQyd_1_5index_xADtSgG_s08WritablegH0Cyqd_0_qd_1_Gt7ElementQyd_1_Rs_SMRd_1_r1_lF11GlobalStateL_qd_0_mfp"},{"kind":"text","text":"> "},{"kind":"keyword","text":"where"},{"kind":"text","text":" "},{"kind":"typeIdentifier","text":"StateType"},{"kind":"text","text":" == "},{"kind":"typeIdentifier","text":"CollectionState"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Element"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"CollectionState"},{"kind":"text","text":" : "},{"kind":"typeIdentifier","text":"MutableCollection","preciseIdentifier":"s:SM"}],"languages":["swift"],"platforms":["macOS"]}]},{"kind":"content","content":[{"anchor":"return-value","level":2,"type":"heading","text":"Return Value"},{"type":"paragraph","inlineContent":[{"type":"text","text":"a "},{"type":"codeVoice","code":"Reducer<GlobalAction, GlobalState>"},{"type":"text","text":" that maps actions and states from the original local reducer, which"},{"type":"text","text":" "},{"type":"text","text":"is specialised in a single Element, into a more generic and global reducer, to be used in a larger context."}]}]},{"kind":"parameters","parameters":[{"name":"actionMap","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"a read-only key-path from global action into a tuple: (index, local action), but it’s optional because"},{"type":"text","text":" "},{"type":"text","text":"maybe this reducer shouldn’t care about certain actions."}]}]},{"name":"stateCollection","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"a writable key-path from global state that traverses into a local state, by extracting only"},{"type":"text","text":" "},{"type":"text","text":"the part that it’s relevant for this reducer. This part needs to be a "},{"type":"codeVoice","code":"MutableCollection"},{"type":"text","text":"."}]}]}]},{"kind":"content","content":[{"anchor":"discussion","level":2,"type":"heading","text":"Discussion"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Let’s suppose you may want to have a "},{"type":"codeVoice","code":"gpsReducer"},{"type":"text","text":" that knows about the following "},{"type":"codeVoice","code":"struct"},{"type":"text","text":":"}]},{"type":"codeListing","syntax":null,"code":["struct Location {","    let latitude: Double","    let longitude: Double","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Let’s call it "},{"type":"emphasis","inlineContent":[{"type":"text","text":"Part"}]},{"type":"text","text":". Both, this state and its reducer will be part of an external framework, used by dozens of"},{"type":"text","text":" "},{"type":"text","text":"apps. Internally probably the "},{"type":"codeVoice","code":"Reducer"},{"type":"text","text":" will receive some known "},{"type":"codeVoice","code":"ActionType"},{"type":"text","text":" and calculate a new location. On the"},{"type":"text","text":" "},{"type":"text","text":"main app we have a global state, that we now call "},{"type":"emphasis","inlineContent":[{"type":"text","text":"Whole"}]},{"type":"text","text":"."}]},{"type":"codeListing","syntax":null,"code":["struct MyGlobalState {","    let title: String?","    let knownLocations: [Location]","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"As expected, "},{"type":"emphasis","inlineContent":[{"type":"text","text":"Part"}]},{"type":"text","text":" ("},{"type":"codeVoice","code":"Location"},{"type":"text","text":") is an element of the array "},{"type":"codeVoice","code":"knownLocations"},{"type":"text","text":", which is property of "},{"type":"emphasis","inlineContent":[{"type":"text","text":"Whole"}]},{"type":"text","text":" "},{"type":"text","text":"("},{"type":"codeVoice","code":"MyGlobalState"},{"type":"text","text":"). This relationship could be less direct, for example there could be several levels of properties"},{"type":"text","text":" "},{"type":"text","text":"until you find the "},{"type":"emphasis","inlineContent":[{"type":"text","text":"Part"}]},{"type":"text","text":" in the "},{"type":"emphasis","inlineContent":[{"type":"text","text":"Whole"}]},{"type":"text","text":", like "},{"type":"codeVoice","code":"global.firstLevel.secondLevel.knownLocations"},{"type":"text","text":", but let’s keep it a"},{"type":"text","text":" "},{"type":"text","text":"single-level for this example."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"To resolve this single element, we not only have to find the path to the array, but we have to find the element"},{"type":"text","text":" "},{"type":"text","text":"inside of the array. There are three methods for doing so:"}]},{"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"the element is "},{"type":"codeVoice","code":"Identifiable"},{"type":"text","text":" (iOS 13 or later)"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"the element has a "},{"type":"codeVoice","code":"Hashable"},{"type":"text","text":" property that makes it unique, so we can find it in the array using this identifier"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"using the index of the element in the array"}]}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Because our "},{"type":"codeVoice","code":"Store"},{"type":"text","text":" understands "},{"type":"emphasis","inlineContent":[{"type":"text","text":"Whole"}]},{"type":"text","text":" ("},{"type":"codeVoice","code":"MyGlobalState"},{"type":"text","text":") and our "},{"type":"codeVoice","code":"gpsReducer"},{"type":"text","text":" understands "},{"type":"emphasis","inlineContent":[{"type":"text","text":"Part"}]},{"type":"text","text":" ("},{"type":"codeVoice","code":"Location"},{"type":"text","text":"), we"},{"type":"text","text":" "},{"type":"text","text":"must "},{"type":"codeVoice","code":"liftToCollection"},{"type":"text","text":" the "},{"type":"codeVoice","code":"Reducer"},{"type":"text","text":" to the "},{"type":"emphasis","inlineContent":[{"type":"text","text":"Whole"}]},{"type":"text","text":" level, by using:"}]},{"type":"codeListing","syntax":null,"code":["let globalStateReducer = gpsReducer.liftToCollection(","    actionMap: \\.actionKeyPathToATuple,","    state: \\.knownLocations",")","\/\/ where:","\/\/   globalStateReducer: Reducer<MyAction, MyGlobalState>","\/\/                                                 ↑ lift","\/\/           gpsReducer: Reducer<LocationAction, Location>"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Different from simple "},{"type":"codeVoice","code":"lift"},{"type":"text","text":" to scalar, this one requires necessarily that you lift the action together with the state."},{"type":"text","text":" "},{"type":"text","text":"That’s because your action has to contain the ID or Index of the element we will modify. The "},{"type":"codeVoice","code":"actionMap"},{"type":"text","text":" KeyPath has to"},{"type":"text","text":" "},{"type":"text","text":"give us a tuple of either:"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"(id, actionToSingleElement)"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"(index, actionToSingleElement)"}]}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The id or index is gonna be how we will search the array for the desired element, and only if we find it, we will run"},{"type":"text","text":" "},{"type":"text","text":"the "},{"type":"codeVoice","code":"gpsReducer"},{"type":"text","text":" for that specific element, using the action that has to do with single elements only."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"As "},{"type":"codeVoice","code":"Location"},{"type":"text","text":" doesn’t have an "},{"type":"codeVoice","code":"id"},{"type":"text","text":" property we will have to either use index, implement "},{"type":"codeVoice","code":"Identifiable"},{"type":"text","text":" protocol or"},{"type":"text","text":" "},{"type":"text","text":"give another unique and "},{"type":"codeVoice","code":"Hashable"},{"type":"text","text":" property."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Now this reducer can be used within our "},{"type":"codeVoice","code":"Store"},{"type":"text","text":" or even composed with others. It also can be used in other apps as"},{"type":"text","text":" "},{"type":"text","text":"long as we have a way to lift it to the world of "},{"type":"emphasis","inlineContent":[{"type":"text","text":"Whole"}]},{"type":"text","text":"."}]}]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/reducer\/reducer\/lifttocollection(action:statecollection:)-4gphe"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/Reducer\/documentation\/Reducer\/Reducer\/liftToCollection(action:stateCollection:)-4gphe","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"A type-lifting method for collections. The global state of your app is "},{"type":"emphasis","inlineContent":[{"type":"text","text":"Whole"}]},{"type":"text","text":", and the "},{"type":"codeVoice","code":"Reducer"},{"type":"text","text":" handles an element"},{"type":"text","text":" "},{"type":"text","text":"that is inside of a collection, which itself is sub-state of the global. Let’s call this single element "},{"type":"emphasis","inlineContent":[{"type":"text","text":"Part"}]},{"type":"text","text":"."}],"kind":"symbol","metadata":{"role":"symbol","title":"liftToCollection(action:stateCollection:)","roleHeading":"Instance Method","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"liftToCollection"},{"kind":"text","text":"<"},{"kind":"genericParameter","text":"GlobalAction"},{"kind":"text","text":", "},{"kind":"genericParameter","text":"GlobalState"},{"kind":"text","text":", "},{"kind":"genericParameter","text":"CollectionState"},{"kind":"text","text":">("},{"kind":"externalParam","text":"action"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"KeyPath","preciseIdentifier":"s:s7KeyPathC"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"GlobalAction","preciseIdentifier":"s:7ReducerAAV16liftToCollection6action05stateD0AByqd__qd_0_Gs7KeyPathCyqd__5IndexQyd_1_5index_xADtSgG_s08WritablegH0Cyqd_0_qd_1_Gt7ElementQyd_1_Rs_SMRd_1_r1_lF12GlobalActionL_qd__mfp"},{"kind":"text","text":", (index"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"CollectionState","preciseIdentifier":"s:7ReducerAAV16liftToCollection6action05stateD0AByqd__qd_0_Gs7KeyPathCyqd__5IndexQyd_1_5index_xADtSgG_s08WritablegH0Cyqd_0_qd_1_Gt7ElementQyd_1_Rs_SMRd_1_r1_lF0D5StateL_qd_1_mfp"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Index","preciseIdentifier":"s:Sl5IndexQa"},{"kind":"text","text":", action"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"ActionType","preciseIdentifier":"s:7ReducerAAV10ActionTypexmfp"},{"kind":"text","text":")?>, "},{"kind":"externalParam","text":"stateCollection"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"WritableKeyPath","preciseIdentifier":"s:s15WritableKeyPathC"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"GlobalState","preciseIdentifier":"s:7ReducerAAV16liftToCollection6action05stateD0AByqd__qd_0_Gs7KeyPathCyqd__5IndexQyd_1_5index_xADtSgG_s08WritablegH0Cyqd_0_qd_1_Gt7ElementQyd_1_Rs_SMRd_1_r1_lF11GlobalStateL_qd_0_mfp"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"CollectionState","preciseIdentifier":"s:7ReducerAAV16liftToCollection6action05stateD0AByqd__qd_0_Gs7KeyPathCyqd__5IndexQyd_1_5index_xADtSgG_s08WritablegH0Cyqd_0_qd_1_Gt7ElementQyd_1_Rs_SMRd_1_r1_lF0D5StateL_qd_1_mfp"},{"kind":"text","text":">) -> "},{"kind":"typeIdentifier","text":"Reducer","preciseIdentifier":"s:7ReducerAAV"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"GlobalAction","preciseIdentifier":"s:7ReducerAAV16liftToCollection6action05stateD0AByqd__qd_0_Gs7KeyPathCyqd__5IndexQyd_1_5index_xADtSgG_s08WritablegH0Cyqd_0_qd_1_Gt7ElementQyd_1_Rs_SMRd_1_r1_lF12GlobalActionL_qd__mfp"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"GlobalState","preciseIdentifier":"s:7ReducerAAV16liftToCollection6action05stateD0AByqd__qd_0_Gs7KeyPathCyqd__5IndexQyd_1_5index_xADtSgG_s08WritablegH0Cyqd_0_qd_1_Gt7ElementQyd_1_Rs_SMRd_1_r1_lF11GlobalStateL_qd_0_mfp"},{"kind":"text","text":">"}],"symbolKind":"method","externalID":"s:7ReducerAAV16liftToCollection6action05stateD0AByqd__qd_0_Gs7KeyPathCyqd__5IndexQyd_1_5index_xADtSgG_s08WritablegH0Cyqd_0_qd_1_Gt7ElementQyd_1_Rs_SMRd_1_r1_lF","extendedModule":"Reducer","modules":[{"name":"Reducer"}]},"hierarchy":{"paths":[["doc:\/\/Reducer\/documentation\/Reducer","doc:\/\/Reducer\/documentation\/Reducer\/Reducer"]]},"references":{"doc://Reducer/documentation/Reducer/Reducer":{"role":"symbol","title":"Reducer","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"Reducer"}],"abstract":[{"type":"text","text":"An entity that calculates the new state when given current state and an incoming action "},{"type":"codeVoice","code":"(Action, inout State) -> Void"},{"type":"text","text":"."}],"identifier":"doc:\/\/Reducer\/documentation\/Reducer\/Reducer","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Reducer"}],"url":"\/documentation\/reducer\/reducer"},"doc://Reducer/documentation/Reducer/Reducer/liftToCollection(action:stateCollection:)-4gphe":{"role":"symbol","title":"liftToCollection(action:stateCollection:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"liftToCollection"},{"kind":"text","text":"<"},{"kind":"genericParameter","text":"GlobalAction"},{"kind":"text","text":", "},{"kind":"genericParameter","text":"GlobalState"},{"kind":"text","text":", "},{"kind":"genericParameter","text":"CollectionState"},{"kind":"text","text":">("},{"kind":"externalParam","text":"action"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"KeyPath","preciseIdentifier":"s:s7KeyPathC"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"GlobalAction","preciseIdentifier":"s:7ReducerAAV16liftToCollection6action05stateD0AByqd__qd_0_Gs7KeyPathCyqd__5IndexQyd_1_5index_xADtSgG_s08WritablegH0Cyqd_0_qd_1_Gt7ElementQyd_1_Rs_SMRd_1_r1_lF12GlobalActionL_qd__mfp"},{"kind":"text","text":", (index"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"CollectionState","preciseIdentifier":"s:7ReducerAAV16liftToCollection6action05stateD0AByqd__qd_0_Gs7KeyPathCyqd__5IndexQyd_1_5index_xADtSgG_s08WritablegH0Cyqd_0_qd_1_Gt7ElementQyd_1_Rs_SMRd_1_r1_lF0D5StateL_qd_1_mfp"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Index","preciseIdentifier":"s:Sl5IndexQa"},{"kind":"text","text":", action"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"ActionType","preciseIdentifier":"s:7ReducerAAV10ActionTypexmfp"},{"kind":"text","text":")?>, "},{"kind":"externalParam","text":"stateCollection"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"WritableKeyPath","preciseIdentifier":"s:s15WritableKeyPathC"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"GlobalState","preciseIdentifier":"s:7ReducerAAV16liftToCollection6action05stateD0AByqd__qd_0_Gs7KeyPathCyqd__5IndexQyd_1_5index_xADtSgG_s08WritablegH0Cyqd_0_qd_1_Gt7ElementQyd_1_Rs_SMRd_1_r1_lF11GlobalStateL_qd_0_mfp"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"CollectionState","preciseIdentifier":"s:7ReducerAAV16liftToCollection6action05stateD0AByqd__qd_0_Gs7KeyPathCyqd__5IndexQyd_1_5index_xADtSgG_s08WritablegH0Cyqd_0_qd_1_Gt7ElementQyd_1_Rs_SMRd_1_r1_lF0D5StateL_qd_1_mfp"},{"kind":"text","text":">) -> "},{"kind":"typeIdentifier","text":"Reducer","preciseIdentifier":"s:7ReducerAAV"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"GlobalAction","preciseIdentifier":"s:7ReducerAAV16liftToCollection6action05stateD0AByqd__qd_0_Gs7KeyPathCyqd__5IndexQyd_1_5index_xADtSgG_s08WritablegH0Cyqd_0_qd_1_Gt7ElementQyd_1_Rs_SMRd_1_r1_lF12GlobalActionL_qd__mfp"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"GlobalState","preciseIdentifier":"s:7ReducerAAV16liftToCollection6action05stateD0AByqd__qd_0_Gs7KeyPathCyqd__5IndexQyd_1_5index_xADtSgG_s08WritablegH0Cyqd_0_qd_1_Gt7ElementQyd_1_Rs_SMRd_1_r1_lF11GlobalStateL_qd_0_mfp"},{"kind":"text","text":">"}],"abstract":[{"type":"text","text":"A type-lifting method for collections. The global state of your app is "},{"type":"emphasis","inlineContent":[{"type":"text","text":"Whole"}]},{"type":"text","text":", and the "},{"type":"codeVoice","code":"Reducer"},{"type":"text","text":" handles an element"},{"type":"text","text":" "},{"type":"text","text":"that is inside of a collection, which itself is sub-state of the global. Let’s call this single element "},{"type":"emphasis","inlineContent":[{"type":"text","text":"Part"}]},{"type":"text","text":"."}],"identifier":"doc:\/\/Reducer\/documentation\/Reducer\/Reducer\/liftToCollection(action:stateCollection:)-4gphe","kind":"symbol","type":"topic","url":"\/documentation\/reducer\/reducer\/lifttocollection(action:statecollection:)-4gphe"},"doc://Reducer/documentation/Reducer":{"role":"collection","title":"Reducer","abstract":[],"identifier":"doc:\/\/Reducer\/documentation\/Reducer","kind":"symbol","type":"topic","url":"\/documentation\/reducer"}}}